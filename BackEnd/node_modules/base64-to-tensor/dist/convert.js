"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.decodeImage = exports.convert = void 0;
var decode_1 = require("./decode");
var trim_base64_1 = require("./trim-base64");
/**
 * This operation converts a base64 into a Tensor3D.
 *
 * @param base64 a valid base64 encoded string.
 * @returns tf.Tensor3D
 */
var convert = function (base64) {
    if (!base64) {
        return null;
    }
    return (0, exports.decodeImage)(Buffer.from((0, trim_base64_1.base64Replacer)(base64), "base64"));
};
exports.convert = convert;
var decode;
/**
 * Decode a Uint8Array into Tensor3d
 *
 * @param contents a valid Uint8Array.
 * @returns tf.Tensor3D
 */
var decodeImage = function (contents) {
    if (!decode) {
        decode = require("jpeg-js").decode;
    }
    var _a = decode(contents, { useTArray: true }), data = _a.data, width = _a.width, height = _a.height;
    return (0, decode_1.convertBuffer)(data, [height, width, 3]);
};
exports.decodeImage = decodeImage;
//# sourceMappingURL=convert.js.map